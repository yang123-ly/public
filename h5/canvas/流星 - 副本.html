<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>canvas流星雨星星动画</title>

<style type="text/css">
    body{
        background-color:black;
    }
    body,html{
        width:100%;
        height:100%;
        overflow: hidden;
    }
</style>
</head>
<body>

    <canvas id='stars'></canvas>
    <script>
        var context;
        var arr = new Array();
        var starCount = 1600;//星星的个数
        var rains = new Array();
        var rainCount = 40;//流星雨的个数

        //初始化
        function init() {
            //获取canves
            var stars = document.getElementById('stars');
            windowWidth = window.innerWidth;
            windowHeight = window.innerHeight;
            stars.width = windowWidth;
            stars.height = windowHeight;
            context = stars.getContext('2d');
        }

        //创建星星对象
        var Star = function() {
            this.x = windowWidth * Math.random();//横坐标
            this.y = 5000 * Math.random();//星星纵坐标
            this.text = '.';//文本
            this.color = 'white';//颜色

            //产生随机颜色
            this.getColor = function() {
                var _r = Math.random();
                if(_r < 0.5) {
                    this.color = '#333';
                }else{
                    this.color = 'white';
                }
            }
            //初始化
            this.init = function() {
                this.getColor();
            }
            //绘制
            this.draw = function() {
                context.fillStyle = this.color;
                context.fillText(this.text,this.x,this.y);
            }
        }

        //创建流星对象
        var MeteorRain =function() {
            this.x = -1;
            this.y = -1;
            this.length = -1;//长度
            this.angle = 30;//倾斜角度
            this.width = -1;
            this.height = -1;
            this.speed = 1;
            this.offset_x = -1;//横坐标偏移衡量
        }


        //页面加载的时候
        window.onload = function() {
            init();
            for(var i = 0;i < starCount;i ++){
                var star = new Star();
                star.init();
                star.draw();
                arr.push(star);
            }
            playStars();
        }
        function playStars() {
            for(var n = 0;n < starCount;n ++) {
                arr[n].getColor();
                arr[n].draw();
            }
            setTimeout('playStars()',10);
        }

    </script>
</body>
</html>